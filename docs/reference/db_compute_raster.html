<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregates intersections of two variables — db_compute_raster • dbplot</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Aggregates intersections of two variables — db_compute_raster" />
<meta property="og:description" content="To visualize two continuous variables, we typically resort to a Scatter plot. However,
this may not be practical when visualizing millions or billions of dots representing the
intersections of the two variables. A Raster plot may be a better option,
because it concentrates the intersections into squares that are easier to parse visually.
Uses very generic dplyr code to aggregate data.  Because of this approach,
the calculations automatically run inside the database if `data` has
a database or sparklyr connection. The `class()` of such tables
in R are: tbl_sql, tbl_dbi, tbl_sql" />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dbplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/edgararuiz/dbplot">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregates intersections of two variables</h1>
    <small class="dont-index">Source: <a href='https://github.com/edgararuiz/dbplot/blob/master/R/raster.R'><code>R/raster.R</code></a></small>
    <div class="hidden name"><code>db_compute_raster.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>To visualize two continuous variables, we typically resort to a Scatter plot. However,
this may not be practical when visualizing millions or billions of dots representing the
intersections of the two variables. A Raster plot may be a better option,
because it concentrates the intersections into squares that are easier to parse visually.</p>
<p>Uses very generic dplyr code to aggregate data.  Because of this approach,
the calculations automatically run inside the database if `data` has
a database or sparklyr connection. The `class()` of such tables
in R are: tbl_sql, tbl_dbi, tbl_sql</p>
    </div>

    <pre class="usage"><span class='fu'>db_compute_raster</span>(<span class='no'>data</span>, <span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'>n</span>(), <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>db_compute_raster2</span>(<span class='no'>data</span>, <span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'>n</span>(), <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>complete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A table (tbl)</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A continuous variable</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>A continuous variable</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>The aggregation formula. Defaults to count (n)</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>The number of bins created by variable. The highest the number, the more records
can be potentially imported from the source</p></td>
    </tr>
    <tr>
      <th>complete</th>
      <td><p>Uses tidyr::complete to include empty bins. Inserts value of 0.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are two considerations when using a Raster plot with a database. Both considerations are related
to the size of the results downloaded from the database:</p>
<p>- The number of bins requested: The higher the bins value is, the more data is downloaded from the database.</p>
<p>- How concentrated the data is: This refers to how many intersections return a value. The more
intersections without a value, the less data is downloaded from the database.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

<span class='co'># Returns a 100x100 grid of record count of intersections of eruptions and waiting</span>
<span class='no'>faithful</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>db_compute_raster</span>(<span class='no'>eruptions</span>, <span class='no'>waiting</span>)</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 246 x 3</span><span>
#&gt;    eruptions waiting `n()`
#&gt;        </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>      1.6     51.5     1
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>      1.64    63.7     1
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>      1.67    58.9     1
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>      1.70    53.6     1
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>      1.74    46.7     2
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>      1.74    47.8     1
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>      1.74    53.6     1
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>      1.74    57.8     1
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>      1.74    61.6     1
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>      1.78    45.6     1
#&gt; </span><span style='color: #949494;'># … with 236 more rows</span><span></div><div class='input'>
<span class='co'># Returns a 50x50 grid of eruption averages of intersections of eruptions and waiting</span>
<span class='no'>faithful</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>db_compute_raster</span>(<span class='no'>eruptions</span>, <span class='no'>waiting</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>eruptions</span>), <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='fl'>50</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 220 x 3</span><span>
#&gt;    eruptions waiting `mean(eruptions)`
#&gt;        </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>             </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>      1.6     51.5              1.6 
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>      1.6     63.1              1.67
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>      1.67    53.6              1.73
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>      1.67    58.9              1.7 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>      1.74    45.1              1.78
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>      1.74    46.2              1.75
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>      1.74    47.2              1.75
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>      1.74    50.4              1.8 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>      1.74    51.5              1.78
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>      1.74    52.5              1.8 
#&gt; </span><span style='color: #949494;'># … with 210 more rows</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Edgar Ruiz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


